<!DOCTYPE html>
<html lang=zh>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="1. 需求最近在搬砖的时候，接到了这样的一个需求：在一个统计调用次数的柱状图里，显示调用次数为0的项目。而现有柱状图的数据是直接从调用日志表里统计得出的，显然调用次数为0的项目不会在日志表中有记录，所以需要先把调用日志表的数据统计好，再和全部的项目合并，然后去重，就能得到想要的结果了。 说到去重，我啪的一下，很快就想到了上学时学到的使用Set的特性去重的方法 1234567891011public">
<meta property="og:type" content="article">
<meta property="og:title" content="痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等">
<meta property="og:url" content="http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/index.html">
<meta property="og:site_name" content="你跺你也麻">
<meta property="og:description" content="1. 需求最近在搬砖的时候，接到了这样的一个需求：在一个统计调用次数的柱状图里，显示调用次数为0的项目。而现有柱状图的数据是直接从调用日志表里统计得出的，显然调用次数为0的项目不会在日志表中有记录，所以需要先把调用日志表的数据统计好，再和全部的项目合并，然后去重，就能得到想要的结果了。 说到去重，我啪的一下，很快就想到了上学时学到的使用Set的特性去重的方法 1234567891011public">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-06-14T16:00:00.000Z">
<meta property="article:modified_time" content="2022-07-21T07:40:50.698Z">
<meta property="article:author" content="zad">
<meta property="article:tag" content="源码笔记">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- rss -->
    
    
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fa fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/posts/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="http://github.com/ZhangAndong12138">Projects</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2022/07/12/HashMap%EF%BC%881%EF%BC%89-%20%E5%AE%9A%E4%B9%89%EF%BC%8C%E9%9D%99%E6%80%81%E5%8F%98%E9%87%8F%E5%92%8C%E5%86%85%E9%83%A8%E7%B1%BB/"><i class="fa fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&text=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&title=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&is_video=false&description=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等&body=Check out this article: http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&title=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&title=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&title=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&title=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&name=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等&description="><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%9C%80%E6%B1%82"><span class="toc-number">1.</span> <span class="toc-text">1. 需求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Object"><span class="toc-number">2.</span> <span class="toc-text">2. Object</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-hashCode"><span class="toc-number">3.</span> <span class="toc-text">3. hashCode()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-equals-Object"><span class="toc-number">4.</span> <span class="toc-text">4. equals(Object)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%8C%96%E5%9D%91"><span class="toc-number">5.</span> <span class="toc-text">5. 挖坑</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">你跺你也麻</span>
      </span>
      
    <div class="postdate">
        <time datetime="2022-06-14T16:00:00.000Z" itemprop="datePublished">2022-06-15</time>
    </div>


      
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link-link" href="/tags/%E6%BA%90%E7%A0%81%E7%AC%94%E8%AE%B0/" rel="tag">源码笔记</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="1-需求"><a href="#1-需求" class="headerlink" title="1. 需求"></a>1. 需求</h2><p>最近在搬砖的时候，接到了这样的一个需求：在一个统计调用次数的柱状图里，显示调用次数为0的项目。而现有柱状图的数据是直接从调用日志表里统计得出的，显然调用次数为0的项目不会在日志表中有记录，所以需要先把调用日志表的数据统计好，再和全部的项目合并，然后去重，就能得到想要的结果了。</p>
<p>说到去重，我啪的一下，很快就想到了上学时学到的使用Set的特性去重的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    List&lt;Integer&gt; list1 = Arrays.asList(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">    List&lt;Integer&gt; list2 = Arrays.asList(<span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>);</span><br><span class="line"></span><br><span class="line">    Set&lt;Integer&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">    set.addAll(list1);</span><br><span class="line">    set.addAll(list2);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="keyword">new</span> ArrayList&lt;&gt;(set));</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//输出 [1, 2, 3, 4, 5]</span></span><br></pre></td></tr></table></figure>
<p>而我需要返回的结果结构是这样的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bar</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String number;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>于是稍加改造，我写出了这样的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    	<span class="comment">//模拟从日志表中统计查询调用记录</span></span><br><span class="line">        List&lt;Bar&gt; logList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        logList.add(<span class="keyword">new</span> Bar(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;规则长方体空间移动项目&quot;</span>, <span class="number">996</span>));</span><br><span class="line">        logList.add(<span class="keyword">new</span> Bar(<span class="string">&quot;2&quot;</span>, <span class="string">&quot;纸质实体化信息传播项目&quot;</span>, <span class="number">120</span>));</span><br><span class="line"></span><br><span class="line">    	<span class="comment">//模拟从项目表中查询全部项目</span></span><br><span class="line">        List&lt;Bar&gt; projectList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        projectList.add(<span class="keyword">new</span> Bar(<span class="string">&quot;1&quot;</span>, <span class="string">&quot;规则长方体空间移动项目&quot;</span>, <span class="number">0</span>));</span><br><span class="line">        projectList.add(<span class="keyword">new</span> Bar(<span class="string">&quot;2&quot;</span>, <span class="string">&quot;纸质实体化信息传播项目&quot;</span>, <span class="number">0</span>));</span><br><span class="line">        projectList.add(<span class="keyword">new</span> Bar(<span class="string">&quot;3&quot;</span>, <span class="string">&quot;软件工程项目&quot;</span>, <span class="number">0</span>));</span><br><span class="line"></span><br><span class="line">        Set&lt;Bar&gt; set = <span class="keyword">new</span> LinkedHashSet&lt;&gt;(); <span class="comment">//为了保证顺序,使用LinkedHashSet</span></span><br><span class="line">        set.addAll(logList);</span><br><span class="line">        set.addAll(projectList);</span><br><span class="line">    </span><br><span class="line">        System.out.println(<span class="keyword">new</span> ArrayList&lt;&gt;(set));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//输出 [Bar(id=&#x27;1&#x27;, name=&#x27;规则长方体空间移动项目&#x27;, number=996), Bar(id=&#x27;2&#x27;, name=&#x27;纸质实体化信息传播项目&#x27;, number=120), Bar(id=&#x27;1&#x27;, name=&#x27;规则长方体空间移动项目&#x27;, number=0), Bar(id=&#x27;2&#x27;, name=&#x27;纸质实体化信息传播项目&#x27;, number=0), Bar(id=&#x27;3&#x27;, name=&#x27;软件工程项目&#x27;, number=0)]</span></span><br></pre></td></tr></table></figure>
<p>从结果来看，显然并没能达到去重的目的。对比两块代码，问题显然是出现在了<code>Bar</code>这个类上，在<code>Set</code>对两个数组进行合并的时候，我们并没有定义如何判断两个<code>Set</code>的实例是否相等。</p>
<p>说到相等，我啪的一下就想到了啊，那不就是<code>equals(Object)</code>方法么，于是我把<code>Bar</code>改成了这样：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bar</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String number;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//重写equals方法,id相同的即为相等</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Bar) &#123;</span><br><span class="line">            <span class="keyword">return</span> ((Bar) o).getId().equals(id);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>再执行一遍，得到的结果却完全没有变化…</p>
<p>这是为什么？</p>
<p>所谓遇事不决看源码，于是我打开了<code>addAll</code>方法的定义</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">AbstractCollection</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">Collection</span>&lt;<span class="title">E</span>&gt; </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">addAll</span><span class="params">(Collection&lt;? extends E&gt; c)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">boolean</span> modified = <span class="keyword">false</span>;</span><br><span class="line">        <span class="keyword">for</span> (E e : c)</span><br><span class="line">            <span class="keyword">if</span> (add(e))</span><br><span class="line">                modified = <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">return</span> modified;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>看起来<code>addAll</code>是循环调用了<code>add</code>方法，注意，这里<code>addAll</code>方法的定义是在了<code>AbstractCollection</code>这个抽象类里，而在这个类里面<code>add</code>方法的定义是这样的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> UnsupportedOperationException();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>那就是说，这个抽象类并没有实现<code>add</code>方法，而是需要子类去做实现。看到这里聪明的你肯定想到了，这是什么，这不就是传说中的<code>模板方法模式</code>么！看一下继承关系，<code>AbstractCollection</code>这个抽象类还有三个抽象子类<code>AbstractList</code> <code>AbstractSet</code> <code>AbstractQueue</code>,而我们要找的<code>add</code>方法的实现，在<code>AbstractSet</code>的子类<code>HashSet</code>里，是这么写的</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> java.util;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashSet</span>&lt;<span class="title">E</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractSet</span>&lt;<span class="title">E</span>&gt; <span class="keyword">implements</span> <span class="title">Set</span>&lt;<span class="title">E</span>&gt;, <span class="title">Cloneable</span>, <span class="title">java</span>.<span class="title">io</span>.<span class="title">Serializable</span> </span>&#123;</span><br><span class="line">	<span class="keyword">private</span> <span class="keyword">transient</span> HashMap&lt;E,Object&gt; map;</span><br><span class="line">    <span class="comment">// Dummy value to associate with an Object in the backing Map</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Object PRESENT = <span class="keyword">new</span> Object();</span><br><span class="line">	<span class="comment">// ...</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">add</span><span class="params">(E e)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> map.put(e, PRESENT)==<span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>我把变量<code>map</code>和常量<code>PRESENT</code>的定义一起贴在了这里，可以看的出来，原来<code>HashSet</code>的本质就是一个<code>value</code>全都相同（也就是这里的<code>PRESENT</code>）的<code>HashMap</code>，而<code>add</code>方法实际上就是<code>HashMap</code>的<code>put</code>方法，那么<code>HashSet</code>实现元素不重复的原理也就一目了然了：因为<code>HashMap</code>中的<code>key</code>是不重复的。</p>
<p>那<code>HashMap</code>的<code>put</code>方法是如何定义的呢</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HashMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">extends</span> <span class="title">AbstractMap</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Map</span>&lt;<span class="title">K</span>,<span class="title">V</span>&gt;, <span class="title">Cloneable</span>, <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> V <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> putVal(hash(key), key, value, <span class="keyword">false</span>, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">final</span> V <span class="title">putVal</span><span class="params">(<span class="keyword">int</span> hash, K key, V value, <span class="keyword">boolean</span> onlyIfAbsent, <span class="keyword">boolean</span> evict)</span> </span>&#123;</span><br><span class="line">        Node&lt;K,V&gt;[] tab; Node&lt;K,V&gt; p; <span class="keyword">int</span> n, i;</span><br><span class="line">        <span class="keyword">if</span> ((tab = table) == <span class="keyword">null</span> || (n = tab.length) == <span class="number">0</span>)</span><br><span class="line">            n = (tab = resize()).length;</span><br><span class="line">        <span class="keyword">if</span> ((p = tab[i = (n - <span class="number">1</span>) &amp; hash]) == <span class="keyword">null</span>)</span><br><span class="line">            tab[i] = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            Node&lt;K,V&gt; e; K k;</span><br><span class="line">            <span class="keyword">if</span> (p.hash == hash &amp;&amp;</span><br><span class="line">                ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                e = p;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span> (p <span class="keyword">instanceof</span> TreeNode)</span><br><span class="line">                e = ((TreeNode&lt;K,V&gt;)p).putTreeVal(<span class="keyword">this</span>, tab, hash, key, value);</span><br><span class="line">            <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> binCount = <span class="number">0</span>; ; ++binCount) &#123;</span><br><span class="line">                    <span class="keyword">if</span> ((e = p.next) == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        p.next = newNode(hash, key, value, <span class="keyword">null</span>);</span><br><span class="line">                        <span class="keyword">if</span> (binCount &gt;= TREEIFY_THRESHOLD - <span class="number">1</span>) <span class="comment">// -1 for 1st</span></span><br><span class="line">                            treeifyBin(tab, hash);</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (e.hash == hash &amp;&amp;</span><br><span class="line">                        ((k = e.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    p = e;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (e != <span class="keyword">null</span>) &#123; <span class="comment">// existing mapping for key</span></span><br><span class="line">                V oldValue = e.value;</span><br><span class="line">                <span class="keyword">if</span> (!onlyIfAbsent || oldValue == <span class="keyword">null</span>)</span><br><span class="line">                    e.value = value;</span><br><span class="line">                afterNodeAccess(e);</span><br><span class="line">                <span class="keyword">return</span> oldValue;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        ++modCount;</span><br><span class="line">        <span class="keyword">if</span> (++size &gt; threshold)</span><br><span class="line">            resize();</span><br><span class="line">        afterNodeInsertion(evict);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> <span class="title">hash</span><span class="params">(Object key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> h;</span><br><span class="line">        <span class="keyword">return</span> (key == <span class="keyword">null</span>) ? <span class="number">0</span> : (h = key.hashCode()) ^ (h &gt;&gt;&gt; <span class="number">16</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>核心的逻辑都在<code>putVal</code>方法里，这时我们再回头来看<code>HashSet</code>的<code>add</code>方法，返回的是<code>map.put(e, PRESENT)==null</code>，也就是说，当<code>put</code>方法，也就是<code>putVal</code>方法返回<code>null</code>的时候，<code>HashSet</code>认为这个元素增加到了集合里，反之就是没有添加成功，也就是判定元素重复了，那么我们只需要看一下<code>putVal</code>什么时候不返回<code>null</code>就可以了。</p>
<p>方法里只有两个返回语句，返回<code>oldValue</code>或者<code>null</code>，而满足返回只有当<code>(p = tab[i = (n - 1) &amp; hash]) == null</code>不成立而<code>e != null</code>成立时，会返回<code>oldValue</code>，其它情况都会返回<code>null</code>。看到这里，我们最初遇到的问题的答案已经能猜个八九不离十了，由于<code>HashSet</code>是通过对象的<code>hashCode</code>方法来计算<code>hash</code>值的，而我们重写了<code>equals</code>方法，自然无法让集合判断两个对象是相等的。</p>
<p>我们先来看<code>(p = tab[i = (n - 1) &amp; hash]) == null</code>这个判断，其中<code>n</code>是<code>HashMap</code>中<code>Node</code>数组的长度，而<code>hash</code>是通过<code>hash</code>方法计算出来的哈希值，对这两个值进行<code>&amp;</code>计算，得出元素所在<code>Node</code>数组的下标，如果这个节点为空，就将这个元素放在这个节点，而我们想要的就是节点不为空的情况。其实到这里已经验证了我们之前的想法，因为下标是根据哈希值计算出来的，那么我们只要确保我们认为的两个相同的对象的<code>hashCode</code>方法返回值相同，就可以达到去重的目的了。</p>
<p>于是把<code>Bar</code>类的代码改成这样</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Bar</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String number;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//重写equals方法,id相同的即为相等</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object o)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (o <span class="keyword">instanceof</span> Bar) &#123;</span><br><span class="line">            <span class="keyword">return</span> ((Bar) o).getId().equals(id);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//重写hashCode方法,根据id计算hash值</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(id);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>就能得到我们想要的结果了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Bar(id&#x3D;&#39;1&#39;, name&#x3D;&#39;规则长方体空间移动项目&#39;, number&#x3D;996), Bar(id&#x3D;&#39;2&#39;, name&#x3D;&#39;纸质实体化信息传播项目&#39;, number&#x3D;120), Bar(id&#x3D;&#39;3&#39;, name&#x3D;&#39;软件工程项目&#39;, number&#x3D;0)]</span><br></pre></td></tr></table></figure>
<p>但其实这里还存在一个问题，现在看起来<code>equals</code>方法没有什么用了，那么我们如果把它注释掉会怎样呢？尝试之后发现，去重又一次失效了，那么这又是为什么呢？</p>
<p>又仔细看了几遍源码，发现问题出在</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (p.hash == hash &amp;&amp; ((k = p.key) == key || (key != <span class="keyword">null</span> &amp;&amp; key.equals(k))))</span><br></pre></td></tr></table></figure>
<p>这个判断，这里调用了<code>key</code>的<code>equals</code>方法，而如果<code>equals</code>返回<code>false</code>，在这个分支里是把<code>e</code>赋值为了<code>null</code>。也就是说，当两个对象的哈希值相同，但<code>equals</code>为<code>false</code>时，<code>HashMap</code>也认为这两个对象不相等。所以<code>equals</code>方法也是必须要重写的。</p>
<p>到这里，这个简单的需求就算是完成了，学到了<code>HashSet</code>如何判定元素相等和如何实现元素不重复的同时，我也产生了更多的疑问。<code>hashCode</code>和<code>equals</code>方法到底是如何要求的，我们在重写时需要注意什么呢？</p>
<h2 id="2-Object"><a href="#2-Object" class="headerlink" title="2. Object"></a>2. Object</h2><p>众所周知，<code>hashCode</code>和<code>equals</code>方法都是定义在<code>Object</code>类中的，而<code>Object</code>的源码中是这样描述自己的。</p>
<blockquote>
<p><code>Object</code>类是所有类层次结构的根。</p>
<p>每个类的父类都是<code>Object</code>。</p>
<p>包括数组在内的所有对象，都实现了这个类的方法。</p>
</blockquote>
<p>听起来就很厉害是不是，<del>毕竟是所有类的爸爸</del>，就是厉害。</p>
<h2 id="3-hashCode"><a href="#3-hashCode" class="headerlink" title="3. hashCode()"></a>3. hashCode()</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">native</span> <span class="keyword">int</span> <span class="title">hashCode</span><span class="params">()</span></span>;</span><br></pre></td></tr></table></figure>
<p><code>Object</code>类中对于<code>hashCode()</code>方法的描述是这样的：</p>
<blockquote>
<p>返回对象的一个hash code值。支持这个方法的好处是为了提供像是<code>java.util.HashMap</code>提供的那样的hash表。</p>
<p>对<code>hashCode</code>的一般约定包括以下几点：</p>
<ul>
<li>在一个Java应用的执行过程中，对同一个对象调用多次此方法，在<code>equals</code>方法用到的信息没有被修改的情况下，<code>hashCode()</code>方法必须始终如一的返回一个相同的整型值。而对于同一个Java应用的两次不同的执行，这个整型值<strong>并不</strong>需要保持一致。</li>
<li>如果<code>equals(Object)</code>方法判定两个对象相等，那么它们各自调用<code>hashCode()</code>方法必须返回相同的整型值。</li>
<li>如过<code>equals(Object)</code>方法判定两个对象不相等，那么它们各自调用<code>hashCode()</code>方法<strong>并不</strong>必须相同的整型值。然而，开发者应该清楚，对两个不相等的对象返回不通的hash code值可以提升hash表的性能。</li>
</ul>
<p>事实上，<code>Object</code>类中定义的<code>hashCode()</code>方法对于不同的对象确实返回不同的整型值。（这通常是通过将对象的内部地址转换为整数来实现的，但是这种实现技术并不是<code>Java™</code>所必须的。（<del>所以<code>hashCode()</code>是native方法</del> ））</p>
</blockquote>
<p>看到这里，我一下子就意识到了我遇到的问题，原来在源码的注释里早就已经做了要求，<code>equals</code>方法判定相等的对象，<code>hashCode()</code>返回的值也必须相同。如果早看过源码的话，就不会犯我一开始的错误。不过通过看<code>HashMap</code>的源码，让我更加理解了为什么<code>hashCode()</code>方法要做这样的要求。</p>
<h2 id="4-equals-Object"><a href="#4-equals-Object" class="headerlink" title="4. equals(Object)"></a>4. equals(Object)</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (<span class="keyword">this</span> == obj);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><code>Object</code>类中对于<code>equals(Object)</code>方法的描述是这样的：</p>
<blockquote>
<p>指明这个对象和一个其它的对象是否<strong>“相等”</strong></p>
<p><code>equals</code>方法实现对两个非空对象的引用的等价关系的判断，具备议下几个性质：</p>
<ul>
<li>自反性：对于任意非空对象的引用<code>x</code>，<code>x.equals(x)</code>应该返回<code>true</code>。</li>
<li>对称性：对于任意非空对象的引用<code>x</code>和<code>y</code>，当且仅当<code>x.equals(y)</code>返回<code>true</code>时，<code>y.equals(x)</code>返回<code>true</code></li>
<li>传递性：对于任意非空对象的引用<code>x</code>、<code>y</code>和<code>z</code>，如果<code>x.equals(y)</code>返回<code>true</code>，<code>y.equals(z)</code>返回<code>true</code>，那么<code>x.equals(z)</code>返回<code>true</code>。</li>
<li>一致性：对于任意非空对象的引用<code>x</code>和<code>y</code>，在<code>equals</code>方法用到的信息没有被修改的情况下，多次调用<code>x.equals(y)</code>要一直返回<code>true</code>或一直返回<code>false</code>。</li>
<li>对于任意非空对象的引用<code>x</code>，<code>x.equals(null)</code>应该返回<code>false</code>。</li>
</ul>
<p><code>Object</code>类中的<code>equals</code>方法实现了最具辨别能力的对象等价关系的判断，即，对于任意非空对象的引用<code>x</code>和<code>y</code>，当且仅当<code>x</code>和<code>y</code>是同一个对象的引用（<code>x == y</code>）时，这个方法才返回<code>true</code>。</p>
<p>请记住，当你重写了这个方法时，一般都有必要重写<code>hashCode</code>方法，以保持对<code>hashCode</code>方法的一般约定中的相等的对象必须有相等的hash code值。</p>
</blockquote>
<p>这里再次强调了，重写<code>equals</code>时要重写<code>hashCode</code>方法，看来这一点确实非常的重要。</p>
<h2 id="5-挖坑"><a href="#5-挖坑" class="headerlink" title="5. 挖坑"></a>5. 挖坑</h2><p>这次虽然对<code>HashMap</code>如何判断两个元素是否相同有了深刻的理解，但是对<code>HashMap</code>的源码中的其它部分，比如它是如何计算下标，如何解决hash冲突的，诸如此类的问题，先在这挖个坑，有时间再仔细研究。</p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/posts/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="http://github.com/ZhangAndong12138">Projects</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-%E9%9C%80%E6%B1%82"><span class="toc-number">1.</span> <span class="toc-text">1. 需求</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Object"><span class="toc-number">2.</span> <span class="toc-text">2. Object</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-hashCode"><span class="toc-number">3.</span> <span class="toc-text">3. hashCode()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-equals-Object"><span class="toc-number">4.</span> <span class="toc-text">4. equals(Object)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-%E6%8C%96%E5%9D%91"><span class="toc-number">5.</span> <span class="toc-text">5. 挖坑</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&text=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&title=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&is_video=false&description=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等&body=Check out this article: http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&title=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&title=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&title=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&title=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://example.com/2022/06/15/%E7%97%9B%E8%8B%A6%E6%9D%A5%E6%BA%90%E4%BA%8E%E6%AF%94%E8%BE%83%E2%80%94%E2%80%94hashCode()%20%E5%92%8C%20equals(Object),%E4%BB%80%E4%B9%88%E6%98%AF%E7%9B%B8%E7%AD%89/&name=痛苦来源于比较——hashCode() 和 equals(Object)，什么是相等&description="><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2022 zad
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/posts/">Writing</a></li>
         
          <li><a target="_blank" rel="noopener" href="http://github.com/ZhangAndong12138">Projects</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<link rel="stylesheet" href="/lib/meslo-LG/styles.css">


<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>


<script src="/js/main.js"></script>



    <!-- Google Analytics -->
    <script type="text/javascript">
        (function(i,s,o,g,r,a,m) {i['GoogleAnalyticsObject']=r;i[r]=i[r]||function() {
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-37473492-6', 'auto');
        ga('send', 'pageview');
    </script>



